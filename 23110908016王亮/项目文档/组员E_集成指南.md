# 组员 E (沉浸式演示) - 模块集成指南

**提交人:** 23110908050 杨立栋 (组员 E)  
**模块名称:** 沉浸式演示 (Immersive View)  
**版本:** 1.0 (Final)

---

## 1. 交付文件清单

请组长 (A) 确保将以下文件包含在最终项目中：

| 文件名 | 路径 (相对) | 说明 |
| :--- | :--- | :--- |
| `VisualHelper.cs` | `WindowsFormsMap1/` | **[核心]** 包含热力图、自动漫游、智能导览的所有逻辑。 |
| `Form1.Visual.cs` | `WindowsFormsMap1/` | **[UI]** 包含菜单初始化、事件绑定的 Partial Class。 |
| `FormICHDetails.cs` | `WindowsFormsMap1/` | **[修改]** 增强了详情弹窗，支持显示非遗图片。 |

> **注意**: 请检查 `WindowsFormsMap1.csproj` 中是否已包含 `<Compile Include="VisualHelper.cs" />`。如果我之前已修改则无需操作。

---

## 2. 集成步骤 (Form1.cs)

在主窗体加载时 (`Form1_Load`)，请确保调用了我的初始化入口：

```csharp
// Form1.cs

private void Form1_Load(object sender, EventArgs e)
{
    // ... 其他组员的初始化 ...

    // [集成 组员E] 沉浸式演示模块
    this.InitVisualModule(); 
    
    // ...
}
```

## 3. 依赖图层说明

本模块依赖特定的图层名称才能自动运行，请确保加载的地图文档 (Mxd) 或图层符合以下规范：

1.  **非遗点图层**: 任意点图层 (Point)。
2.  **行政区面图层**: 包含 "shiqu" 或 "市区" 关键字的多边形图层 (Polygon)。
    *   *用途*: 用于生成“空间统计热力图”和“智能导览 HUD”的区域识别。
3.  **非遗数据字段**:
    *   `名称` 或 `Name`: 用于在 HUD 中显示区域名。
    *   `图片` (可选): 如果有图片路径，详情弹窗会自动加载显示。

---

## 4. 功能清单 (验收标准)

集成后，主菜单应出现 **"沉浸式演示(Visual)"** 选项卡：

1.  **生成热力图 (Heatmap)**
    *   点击后，行政区图层应根据包含的点数量渲染颜色 (黄->红)。
    *   弹出成功提示。

2.  **开启/停止 漫游 (Fly-over)**
    *   点击后弹出速度选择 (Yes=正常, No=快速)。
    *   **效果**: 地图平滑左移，底部出现蓝色 **智能导览 HUD**，实时显示区域名和数量。
    *   再次点击或漫游结束时，HUD 应自动消失，不报错。

---

如有任何集成报错 (如 `CS0103` 找不到方法)，请检查是否通过 `partial class` 正确合并了 `Form1.Visual.cs`。
